
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../..">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Roboticarm - HM Lab</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#robotic-arm-control-using-computer-vision-and-machine-learning" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="HM Lab" class="md-header__button md-logo" aria-label="HM Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HM Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Roboticarm
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Projects

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="HM Lab" class="md-nav__button md-logo" aria-label="HM Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    HM Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Projects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Roboticarm
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p>Project developed at the Automation and Robotics Laboratory (LAR) of the School of Science and Technology (ECT) of the Federal University of Rio Grande do Norte (UFRN)</p>
<p>Current project members:
- <a href="https://github.com/KennymarOliveira">Kennymar Bezera de Oliveira</a>
- <a href="https://github.com/thiagoclopes">Thiago Vinicius Cardoso Lopes</a></p>
<!---
- [Geraldo Almeida Neto](https://github.com/geraldoAn)
- [Franklin Thiago Pereira Correia](https://github.com/FranklynThP)
-->

<p>Supervisor: <a href="https://heltonmaia.github.io/heltonmaia/">Helton Maia</a> </p>
<h1 id="robotic-arm-control-using-computer-vision-and-machine-learning">Robotic Arm Control Using Computer Vision and Machine Learning</h1>
<p>This project encompasses computer vision, machine learning, 3D printing and integrates with Arduino, with the main objective of enabling robotic arms to reproduce the movements of a human arm. The project involves a series of technologies using the OpenCV computer vision library, such as capturing images in real time using a webcam or smartphone. Then, detecting relevant information from the user's hand through our neural network trained based on the YOLOv8 architecture. Finally, the control of the robotic arm, which was done via 3D printing, is carried out by Arduino according to serial port commands given by the python script using the Pyserial module. This control is based on an intelligent decision-making system that links the user's hand movements to the robotic arm.</p>
<p><a href="https://github.com/heltonmaia/ECT-proj-roboticArm/assets/4681481/2796c126-4182-4c66-be8b-e16110343908">Project video</a></p>
<h1 id="using-the-project">Using the project</h1>
<h3 id="requirements"><strong>Requirements</strong></h3>
<ul>
<li>Anaconda package (<a href="https://docs.anaconda.com/free/navigator/install/">Install Guide</a>) or any IDE of your choice</li>
<li>Python 3.10 (<a href="https://www.python.org/downloads/release/python-3100/">Install Guide</a>) (If you choose to use an IDE of your choice)</li>
<li>OpenCV</li>
<li>Ultralytics</li>
<li>Pyserial</li>
<li>ipykernel</li>
<li>Webcam or a smartphone</li>
</ul>
<h3 id="creating-a-virtual-environment"><strong>Creating a virtual environment</strong></h3>
<p>In this part, the basic configuration necessary for the implementation of the algorithm is described according to the specified requirements.</p>
<p>Assuming that the installation of the Anaconda package (or your favorite IDE) has already been done, it is time to create a virtual environment, which will provide the installation of only the necessary modules and an independent environment for the development and execution of the project using specific versions according to the need.</p>
<p>If you are using an IDE of your choice, just make sure to set up your virtual environment using python 3.10 version. In this tutorial, we will just show how to use the Conda virtual environment manager, which is already included in the Anaconda package.</p>
<p>Open the Anaconda prompt and follow the command changing MyEnvironmentName to the desired name for your environment.</p>
<pre><code>conda create --name MyEnvironmentName python=3.10
</code></pre>
<p>With the environment now created, activate it changing MyEnvironmentName to the name you gave it.</p>
<pre><code>conda activate MyEnvironmentName
</code></pre>
<h3 id="installing-modules-and-registering-the-environment"><strong>Installing modules and registering the environment</strong></h3>
<p>Here we need to install the necessary packages listed in the requirements section. Keep in mind that they will only be installed in your virtual environment, which is currently activated.</p>
<p>This part also applies if you are using the IDE of your choice and another virtual environment manager. </p>
<p>Now install the packages one by one using the following commands.</p>
<pre><code>pip install opencv-python
</code></pre>
<pre><code>pip install ultralytics
</code></pre>
<pre><code>pip install pyserial
</code></pre>
<pre><code>pip install ipykernel
</code></pre>
<p>In case you are using the Anaconda package, you need to register your conda virtual environment using the ipykernel module. If you don't do this, the Jupyter Notebook, that was installed within the Anaconda package, will not recognize your virtual environment and the modules on it. Once again change MyEnvironmentName to the name you gave it</p>
<pre><code>python -m ipykernel install --user --name=MyEnvironmentName
</code></pre>
<h3 id="accessing-the-camera"><strong>Accessing the camera</strong></h3>
<p>If you don't have a webcam, you can use the Droidcam app on a smartphone to use the phone's camera as a webcam</p>
<ul>
<li>Install the Droidcam app (Android or IOS): <a href="https://www.dev47apps.com">Download Page</a></li>
<li>Install the Droidcam client on Windows: <a href="https://www.dev47apps.com/droidcam/windows/">Download Page</a></li>
<li>Then follow the instructions to connect: <a href="https://www.dev47apps.com/droidcam/connect/">Connection Guide</a></li>
</ul>
<h3 id="detecting-the-hand"><strong>Detecting the hand</strong></h3>
<p>To use the main algorithm, it is necessary to ensure the correct hand detection using our neural network.</p>
<p>Once you have access to a camera, use Jupyter Notebook to open the file "test-hand-detection.py" available in this project. </p>
<p>Look for the "Kernel" tab above the code within Jupyter Notebook editor, and then change the kernel to your virtual environment's one.</p>
<p>Download our "weight-hand-segmentation-v11.pt" file, available in the weights folder of this project, and put it in the same directory as the "test-hand-detection.py" script. </p>
<p>With our weights file, you will be able to use our trained neural network to detect and segment any hand in the camera feed.</p>
<p>Now you can run the script and see if the hand is detected and segmented correctly as shown below.</p>
<p align="center"><img src="https://github.com/heltonmaia/ECT-proj-roboticArm/blob/main/images/hand%20detection%20in%20range.png?raw=true" style="width: 600px; height: 420px;"></p>

<p>After the correct detection of the hand it is necessary to close the jupyter notebook (or the IDE that you are using) and deactivate the virtual environment, and only after the Arduino part is done be activated again, otherwise both codes will try to take control of the serial port and the serial commands comming from the python script will not be read. The next access to the Anaconda prompt and the Jupyter Notebook should be via the Anaconda Navigator, after running it as administrator and while the Arduino script is running.</p>
<p>You can deactivate your virtual environment typing in the Anaconda prompt</p>
<pre><code>conda deactivate
</code></pre>
<h3 id="configuring-the-arduino-ide"><strong>Configuring the Arduino IDE</strong></h3>
<p>Once you installed the Arduino IDE, you can download the zip file of the VarSpeedServo library available <a href="https://github.com/netlabtoolkit/VarSpeedServo">here</a> and install it by following <a href="https://docs.arduino.cc/software/ide-v1/tutorials/installing-libraries">this guide</a>.
Now use the file "serial-port-command-receiver.cpp" in the Arduino IDE.</p>
<h3 id="assembling-the-circuit"><strong>Assembling the circuit</strong></h3>
<p>The following circuit was simulated using the <a href="https://wokwi.com/projects/new/arduino-uno">Wokwi</a> online platform, and considering that the four servomotors are already fitted to the robotic arm, the circuit of this image bellow must be physically assembled.</p>
<p align="center"><img src="https://github.com/heltonmaia/ECT-proj-roboticArm/blob/main/images/wokwi.PNG?raw=true" style="width: 600px; height: 420px;"></p>

<p>If you want to save time, use our pin configuration as shown in the circuit:</p>
<pre><code>Gripper -&gt; Pin 2
Lower Arm -&gt; Pin 3
Upper Arm -&gt; Pin 4
Rotating Base -&gt; Pin 5
</code></pre>
<p>If you want to change the pins, just make sure the digital pins on the Arduino board receiving the signal jumpers from the servomotors are constant values specified in the file "serial-port-command-receiver.cpp" as "#define something_pin".</p>
<p>For example, if the servomotor that controls the robotic arm's gripper is connected to digital pin 2 on the Arduino board, the definition in the code should be "#define gripper_pin 2".</p>
<p>Select the right serial port within the IDE, compile and send the code to the board.</p>
<h3 id="using-the-main-algorithm"><strong>Using the main algorithm</strong></h3>
<p>While the Arduino script is running, run Anaconda Navigator as administrator and launch the Anaconda prompt. Running as admin also applies if you are using another IDE.</p>
<p>Now activate your virtual environment, go back to the Navigator interface and launch Jupyter Notebook. Don't forget to activate your Kernel again.</p>
<p>Download the following files and put them in the same directory as the "weight-hand-segmentation-v11.pt" file.</p>
<pre><code>main.py
robotic_arm.py
detection_infos.py
interface.py
</code></pre>
<p>Locate the COM variable in the "main.py" file and change it to the serial port currently connected to the arduino (check the Arduino IDE in case you don't remember).</p>
<p>For example, if your port is COM3, you need to set the COM variable to 3 and so on.</p>
<p>Now you can run the code and control the robotic arm by the movements of your hand.</p>
<p>To facilitate the process of acquiring the files, you can also download this entire project.</p>
<h1 id="examples">Examples</h1>
<p>The following images are examples that show what approximate positions the hand must be in for detections to be made correctly.</p>
<h3 align="center"><b>Open hand</b></h3>
<p align="center"><img src="https://github.com/heltonmaia/ECT-proj-roboticArm/blob/main/images/open%20hand.png?raw=true" style="width: 600px; height: 420px;"></p>

<h3 align="center"><b>Closed hand</b></h3>
<p align="center"><img src="https://github.com/heltonmaia/ECT-proj-roboticArm/blob/main/images/closed%20hand.png?raw=true" style="width: 600px; height: 420px;"></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>